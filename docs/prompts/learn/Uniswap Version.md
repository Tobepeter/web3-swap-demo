# Uniswap 有什么版本，V3 V4 有什么区别？

## Uniswap 主要版本

### V1 (2018)
- 最初版本，引入了自动做市商(AMM)概念
- 只支持 ETH 与 ERC20 代币之间的交易
- 使用恒定乘积公式 x*y=k

### V2 (2020)
- 支持任意 ERC20 代币之间的交易
- 引入闪电贷功能
- 改进了价格预言机
- 仍使用恒定乘积公式x`

### V3 (2021)
- 引入集中流动性（Concentrated Liquidity）
- 资本效率提高 4000 倍
- 支持多个手续费等级（0.05%、0.3%、1%）
- 改进的预言机功能
- NFT 形式的流动性代币

### V4 (2024)
- 引入钩子（Hooks）机制，支持自定义交易逻辑
- 单例池（Singleton）设计，降低部署成本
- 闪电贷功能免费
- 支持原生 ETH（不需要 WETH）
- 改进的路由机制
- 支持更灵活的手续费设置

## V3 vs V4 主要区别

1. **可扩展性**
- V3：功能相对固定
- V4：通过钩子机制支持自定义功能扩展

2. **部署成本**
- V3：每个交易对需要单独部署池子
- V4：使用单例池设计，显著降低 gas 成本

3. **开发友好度**
- V3：开发集成相对复杂
- V4：提供更简单的接口和更灵活的定制选项

4. **闪电贷**
- V3：需要支付手续费
- V4：免费使用

5. **ETH 处理**
- V3：需要先将 ETH 转换为 WETH
- V4：直接支持原生 ETH